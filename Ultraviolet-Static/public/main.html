<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="googlebot" content="index, follow, snippet" />
    <link rel="shortcut icon" href="favicon.ico" />
    <link id="themeStylesheet" rel="stylesheet" type="text/css" href="" >
    <script src="settings/js/themes.js"> </script>
    <script src="uv/uv.bundle.js" defer></script>
    <script src="uv/uv.config.js" defer></script>
    <script src="tab.js"> </script>
    <script src="register-sw.js" defer></script>
    <link rel="icon" type="image/png" href="/favicon/favicon-32x32.png" />
    <link href="https://fonts.googleapis.com/css2?family=Tilt+Prism&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Exo+2&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk&display=swap" rel="stylesheet" />   
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet"> 
    <link href="https://fonts.cdnfonts.com/css/blacklisted" rel="stylesheet" />
    <script src="search.js" defer></script>
    <script src="main.js" defer></script>
    <script type="application/ld+json"></script>
    <title>New Tab</title>
  </head>
  <body class="mainbody">
    <header class="mainheading">
      <h1 class="heading" style="padding-bottom: 0; text-transform: none;">Shadow</h1>
      <p id="ping-time" style=" margin-top: -1%; text-align: center;"></p>
      <ul id="suggestions-list" class="mainsgtlist"></ul>
    </header>
    <br><br>
    <div class="search-container">
      <form id="uv-form" class="flex-center">
        <input style="z-index: -9999;" id="uv-search-engine" value="" type="hidden"/>
        <input id="uv-address" class="mainurl"type="text" placeholder="Search the web" autofocus/>
      </form>
      <div class="shortcuts">
        <a id="discord" >
          <img src="shortcuts/discord.jpg" alt="" />
          <span>Discord</span>
        </a>
        <a id = "chess">
          <img src="shortcuts/chess.png" alt="" />
          <span>Chess</span>
        </a>
        <a  id="mc">
          <img src="shortcuts/minecraft.png" alt="" />
          <span>Minecraft</span>
        </a>
        <a id="poki">
          <img src="shortcuts/poki.png" alt="" />
          <span>Poki</span>
        </a>
        <a  id = "y8">
          <img src="shortcuts/y8.png" alt="" />
          <span>Y8 Games</span>
        </a>
        <a id="yt">
          <img src="shortcuts/youtube.png" alt="" />
          <span>YouTube</span>
        </a>
        <a id = "GPT" >
          <img src="shortcuts/chatgpt.png" alt="" />
          <span>ChatGPT</span>
        </a>
        <a id = "vs" >
          <img src="shortcuts/vscode.png" alt="" />
          <span>VS Code</span>
        </a>
        <a id = "github">
          <img src="shortcuts/github.webp" alt="" />
          <span>Github</span>
        </a>
        <a id = "calc">
          <img src="shortcuts/calculator.png" alt="" />
          <span>Calculator</span>
        </a>
      </div>
    </div>
  </body>
</html>

<script>
  var searchEngineValue = localStorage.getItem("searchengine");
    if (!searchEngineValue) {
    searchEngineValue = "https://www.google.com/search?q=%s";
  }
  document.getElementById("uv-search-engine").value = searchEngineValue;
  </script>

<script src="js/panic.js"></script>

<script>
  function calculatePing() {
    var startTime = new Date().getTime();
  
    navigator.sendBeacon('/ping', '');
  
    var endTime = new Date().getTime();
    var pingTime = endTime - startTime;
    var statusElement = document.getElementById('ping-time');
    statusElement.textContent = 'Ping: ' + pingTime + ' ms';
  }
  
  window.addEventListener('load', function() {
    calculatePing(); // Measure the ping when the website loads
    setInterval(calculatePing, 1000/10); // Update every 5 seconds
  });
  
  </script>

<script>
  const addressInput = document.getElementById('uv-address');
  const suggestionsList = document.getElementById('suggestions-list');
  let timeoutId;

  addressInput.addEventListener('input', handleInput);

  function handleInput(event) {
    const searchTerm = event.target.value.trim();

    if (searchTerm.length > 0) {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(() => {
        getSuggestions(searchTerm)
          .then(renderSuggestions)
          .catch(console.error);
      }, 300);
    } else {
      clearSuggestions();
    }
  }

  function getSuggestions(query) {
    const proxyUrl = 'https://acidichighqueries.nccoder1.repl.co/proxy?url=';
    const url = `https://duckduckgo.com/ac/?q=${encodeURIComponent(query)}`;
    return fetch(proxyUrl + encodeURIComponent(url))
      .then(response => response.json())
      .then(data => data.map(item => item.phrase));
  }

  function renderSuggestions(suggestions) {
    clearSuggestions();

    suggestions.slice(0, 5).forEach(suggestion => { // Limit to the first 5 suggestions
      const suggestionItem = document.createElement('li');
      suggestionItem.classList.add('suggestion-item');
      suggestionItem.textContent = suggestion;
      suggestionItem.addEventListener('click', () => {
        addressInput.value = suggestion;
        clearSuggestions();
        performSearch();
      });

      suggestionsList.appendChild(suggestionItem);
    });
  }

  function clearSuggestions() {
    suggestionsList.innerHTML = '';
  }

  function performSearch() {
    const searchTerm = addressInput.value.trim();
    // Add your code to perform the search using the search term
    console.log(`Performing search for: ${searchTerm}`);
  }
</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
  var storedTheme = localStorage.getItem("themes");
  var defaultCSSPath = "/CSS/index.css";
  var cssLink = document.getElementById("themeStylesheet");
  cssLink.href = storedTheme || defaultCSSPath;

  window.addEventListener("storage", function(event) {
    if (event.key === "themes" && event.newValue !== cssLink.href) {
      cssLink.href = event.newValue;
    }
  });
});
</script>